<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/vite.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Vite + TS</title>
    <script type="module" crossorigin>
var g=Object.defineProperty;var a=(s,t,e)=>t in s?g(s,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):s[t]=e;var d=(s,t,e)=>(a(s,typeof t!="symbol"?t+"":t,e),e);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))c(i);new MutationObserver(i=>{for(const r of i)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&c(o)}).observe(document,{childList:!0,subtree:!0});function e(i){const r={};return i.integrity&&(r.integrity=i.integrity),i.referrerPolicy&&(r.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?r.credentials="include":i.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function c(i){if(i.ep)return;i.ep=!0;const r=e(i);fetch(i.href,r)}})();function m(s="svg"){return document.createElementNS("http://www.w3.org/2000/svg",s)}class y{constructor(t){d(this,"width");d(this,"height");this.width=(t==null?void 0:t.width)||0,this.height=(t==null?void 0:t.height)||0}}class w extends y{constructor(e){const r="view";super({width:(e==null?void 0:e.width)||100,height:(e==null?void 0:e.height)||100});d(this,"mode");this.mode=(e==null?void 0:e.mode)||r}}class A{constructor(t){d(this,"dom");d(this,"model");this.model=t,this.dom=m(),this.dom.style.border="1px solid",this.dom.style.background="#ddd",this.dom.setAttribute("viewBox",`0 0 ${this.model.width} ${this.model.height}`)}update(t){console.log(t),this.model.width=t.width,this.model.height=t.height,this.model.mode=t.mode}render(){this.dom.setAttribute("width",String(this.model.width)),this.dom.setAttribute("height",String(this.model.height)),this.model.mode==="view"?this.dom.style.cursor="default":this.model.mode==="pan"&&(this.dom.style.cursor="grab")}append(t){this.dom.append(t)}get(){return this.dom}}class f{constructor(t){d(this,"model");d(this,"view");d(this,"observers",[]);this.model=new w(t),this.view=new A(this.model),this.addObserver(this.view)}addObserver(t){this.observers.push(t)}removeObserver(t){this.observers=this.observers.filter(e=>e!==t)}notifyObservers(t){this.observers.forEach(e=>{e.update&&e.update(t),e.render&&e.render()})}setWidth(t){this.model.width=t,this.notifyObservers(this.model)}setHeight(t){this.model.height=t,this.notifyObservers(this.model)}setMode(t){this.model.mode=t,this.notifyObservers(this.model)}getMode(){return this.model.mode}def(t){const e=m("defs");e.append(t),this.view.append(e)}getModel(){return this.model}getView(){return this.view.render(),this.view.get()}append(t){this.view.append(t)}}function v(s){const t=document.createElement("form");t.style.border="1px solid",t.style.display="inline-block",t.style.padding="4px";const e=document.createElement("h4");e.innerHTML="Board Sizer",t.append(e);const c=document.createElement("label");c.innerHTML="width<br>";const i=document.createElement("input");i.type="number",c.append(i),t.append(c);const r=document.createElement("label");r.innerHTML="height<br>",t.innerHTML+="<br>";const o=document.createElement("input");o.type="number",r.append(o),t.append(r);const n=document.createElement("button");return n.innerHTML="set size",n.type="submit",n.style.display="block",n.style.marginLeft="auto",t.append(n),t.onsubmit=function(h){h.preventDefault();const u=h.target[0].valueAsNumber,b=h.target[1].valueAsNumber;s.setWidth(u),s.setHeight(b)},t}function E(s){const t=v(s);document.body.append(t);const e=document.createElement("button");e.innerHTML="switch to view mode",e.onclick=function(){s.setMode("view"),console.log(s.getModel())};const c=document.createElement("button");c.innerHTML="switch to pan mode",c.onclick=function(){s.setMode("pan"),console.log(s.getModel())},document.body.append(e),document.body.append(c);const i=m("rect");i.setAttribute("id","myRect"),i.setAttribute("x","0"),i.setAttribute("y","0"),i.setAttribute("width","10"),i.setAttribute("height","10"),i.setAttribute("stroke","black"),s.def(i);const r=m("text");r.setAttribute("id","myText"),r.setAttribute("x","0"),r.setAttribute("y","0"),r.setAttribute("fill","red"),r.innerHTML="hello world",s.def(r);const o=m("use");o.setAttribute("href","#myRect"),o.setAttribute("x","0"),o.setAttribute("y","0"),s.append(o);const n=m("use");n.setAttribute("href","#myRect"),n.setAttribute("x","20"),n.setAttribute("y","20"),s.append(n);const h=m("use");h.setAttribute("href","#myText"),h.setAttribute("x","20"),h.setAttribute("y","20"),s.append(h);const u=m("line");u.setAttribute("x1",o.getAttribute("x")||"0"),u.setAttribute("y1",o.getAttribute("y")||"0"),u.setAttribute("x2",n.getAttribute("x")||"0"),u.setAttribute("y2",n.getAttribute("y")||"0"),u.setAttribute("stroke","yellow"),s.append(u)}const l=new f;console.log(l);console.log(l.getModel());const p=l.getView();document.querySelector("#app").append(p);E(l);p.addEventListener("mousemove",s=>{console.log(s.offsetX),l.getMode()==="pan"&&p.setAttribute("viewBox",`0 0 ${s.offsetX} 100`)});

</script>
    <style>
:root{font-family:Inter,system-ui,Avenir,Helvetica,Arial,sans-serif;line-height:1.5;font-weight:400;color-scheme:light dark;color:#ffffffde;background-color:#242424;font-synthesis:none;text-rendering:optimizeLegibility;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;-webkit-text-size-adjust:100%}a{font-weight:500;color:#646cff;text-decoration:inherit}a:hover{color:#535bf2}body{margin:0;display:flex;place-items:center;min-width:320px;min-height:100vh}h1{font-size:3.2em;line-height:1.1}#app{max-width:1280px;margin:0 auto;padding:2rem;text-align:center}.card{padding:2em}.read-the-docs{color:#888}button{border-radius:8px;border:1px solid transparent;padding:.6em 1.2em;font-size:1em;font-weight:500;font-family:inherit;background-color:#1a1a1a;cursor:pointer;transition:border-color .25s}button:hover{border-color:#646cff}button:focus,button:focus-visible{outline:4px auto -webkit-focus-ring-color}@media (prefers-color-scheme: light){:root{color:#213547;background-color:#fff}a:hover{color:#747bff}button{background-color:#f9f9f9}}

</style>
  </head>
  <body>
    <div id="app"></div>
    
  </body>
</html>
